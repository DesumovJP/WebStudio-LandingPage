# üóÑÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–ª—è Dev —Ç–∞ Prod

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û: –ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –æ–¥–Ω—É –±–∞–∑—É –¥–ª—è dev —ñ prod!

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–æ–¥–Ω—ñ—î—ó PostgreSQL –±–∞–∑–∏** –¥–ª—è development —ñ production —Å—Ç–≤–æ—Ä–∏—Ç—å **—Å–µ—Ä–π–æ–∑–Ω—ñ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∏**:

- ‚ùå Dev –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ production –¥–∞–Ω—ñ
- ‚ùå –ú–æ–∂–Ω–∞ –≤–∏–ø–∞–¥–∫–æ–≤–æ –≤–∏–¥–∞–ª–∏—Ç–∏ production –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚ùå –ú—ñ–≥—Ä–∞—Ü—ñ—ó –º–æ–∂—É—Ç—å –∑–ª–∞–º–∞—Ç–∏ production —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
- ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –±–µ–∑–ø–µ—á–Ω–æ

---

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏

### **–í–∞—Ä—ñ–∞–Ω—Ç 1: SQLite –¥–ª—è Dev, PostgreSQL –¥–ª—è Prod** (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –ø–æ—á–∞—Ç–∫—É)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –®–≤–∏–¥–∫–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏
- ‚úÖ –ù–µ –ø–æ—Ç—Ä–µ–±—É—î –æ–∫—Ä–µ–º–æ—ó PostgreSQL –±–∞–∑–∏
- ‚úÖ –ü–æ–≤–Ω–∞ —ñ–∑–æ–ª—è—Ü—ñ—è –≤—ñ–¥ production
- ‚úÖ –®–≤–∏–¥–∫–∞ —Ä–æ–±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**

**Backend `.env` (development):**
```env
NODE_ENV=development
# –ù–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–π DATABASE_URL - –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å SQLite
```

**Backend –Ω–∞ Railway (production):**
```env
NODE_ENV=production
DATABASE_URL=${{Postgres.DATABASE_URL}}
DATABASE_SSL=true
```

---

### **–í–∞—Ä—ñ–∞–Ω—Ç 2: –û–∫—Ä–µ–º–∞ PostgreSQL –¥–ª—è Dev, PostgreSQL –¥–ª—è Prod** (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ –¥–ª—è –∫–æ–º–∞–Ω–¥–∏)

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –û–¥–Ω–∞–∫–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è dev —ñ prod
- ‚úÖ –ú–æ–∂–Ω–∞ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ PostgreSQL-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
- ‚úÖ –õ–µ–≥—à–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
- ‚úÖ –ö—Ä–∞—â–µ –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ—ó —Ä–æ–±–æ—Ç–∏

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**

#### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏ –æ–∫—Ä–µ–º—É PostgreSQL –±–∞–∑—É –¥–ª—è dev

**–í–∞—Ä—ñ–∞–Ω—Ç A: Railway (–Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à–µ)**

1. –ó–∞–π–¥–∏ –Ω–∞ [railway.app](https://railway.app)
2. –°—Ç–≤–æ—Ä–∏ **–Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç** (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π —ñ—Å–Ω—É—é—á–∏–π)
3. **"New"** ‚Üí **"Database"** ‚Üí **"PostgreSQL"**
4. –ù–∞–∑–≤–∏ –±–∞–∑—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `webstudio-dev-db`
5. –°–∫–æ–ø—ñ—é–π `DATABASE_URL` –∑—ñ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

**–í–∞—Ä—ñ–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–∞ PostgreSQL**

```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ (macOS)
brew install postgresql@14
brew services start postgresql@14

# –°—Ç–≤–æ—Ä–∏ –±–∞–∑—É –¥–ª—è dev
createdb webstudio_dev

# –û—Ç—Ä–∏–º–∞–π connection string
# postgresql://postgres:password@localhost:5432/webstudio_dev
```

#### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–π Backend `.env` –¥–ª—è dev

**Backend `.env` (development):**
```env
NODE_ENV=development
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π –û–ö–†–ï–ú–£ –±–∞–∑—É –¥–ª—è dev
DATABASE_URL=postgresql://user:password@host:5432/webstudio_dev
DATABASE_SSL=false  # –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó PostgreSQL
# –∞–±–æ
DATABASE_SSL=true   # –¥–ª—è Railway PostgreSQL
```

#### –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–π Railway –¥–ª—è prod

**Backend –Ω–∞ Railway (production):**
```env
NODE_ENV=production
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π PRODUCTION –±–∞–∑—É (—ñ–Ω—à—É!)
DATABASE_URL=${{Postgres.DATABASE_URL}}  # production –±–∞–∑–∞
DATABASE_SSL=true
```

---

## üîç –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞ –±–∞–∑–∞

### Development

```bash
cd backend
npm run dev
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
- –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è SQLite: –ø–æ–±–∞—á–∏—à `better-sqlite3` –≤ –ª–æ–≥–∞—Ö
- –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è PostgreSQL: –ø–æ–±–∞—á–∏—à `postgres` –≤ –ª–æ–≥–∞—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä `.tmp/data.db` - —è–∫—â–æ —Ñ–∞–π–ª —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è SQLite

### Production

–ü–µ—Ä–µ–≤—ñ—Ä –≤ Railway ‚Üí Logs:
- –ú–∞—î –±—É—Ç–∏ `postgres` –≤ –ª–æ–≥–∞—Ö
- –ú–∞—î –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—å –¥–æ production –±–∞–∑–∏

---

## üìã –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤

| –ö—Ä–∏—Ç–µ—Ä—ñ–π | SQLite (Dev) | PostgreSQL (Dev) |
|----------|--------------|------------------|
| –®–≤–∏–¥–∫—ñ—Å—Ç—å –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å —Ä–æ–±–æ—Ç–∏ | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê |
| –Ü–∑–æ–ª—è—Ü—ñ—è –≤—ñ–¥ prod | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è PostgreSQL | ‚ùå | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–Ω–∞ —Ä–æ–±–æ—Ç–∞ | ‚≠ê‚≠ê‚≠ê | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê |
| –í–∞—Ä—Ç—ñ—Å—Ç—å | –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ | –ë–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ (Railway) |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è

### –î–ª—è –ø–æ—á–∞—Ç–∫—É (–æ–¥–∏–Ω —Ä–æ–∑—Ä–æ–±–Ω–∏–∫):
**SQLite –¥–ª—è dev, PostgreSQL –¥–ª—è prod**

### –î–ª—è –∫–æ–º–∞–Ω–¥–∏ –∞–±–æ –¥–æ–≤–≥–æ—Å—Ç—Ä–æ–∫–æ–≤–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏:
**–û–∫—Ä–µ–º–∞ PostgreSQL –¥–ª—è dev, PostgreSQL –¥–ª—è prod**

---

## üö® –ß–æ–≥–æ –ù–ï —Ä–æ–±–∏—Ç–∏

‚ùå **–ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π production `DATABASE_URL` –≤ `.env` –¥–ª—è dev**
```env
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
DATABASE_URL=postgresql://...production-database...
```

‚ùå **–ù–ï –∑–º—ñ–Ω—é–π production –±–∞–∑—É –ø—ñ–¥ —á–∞—Å –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏**

‚ùå **–ù–ï –∫–æ–º—ñ—Ç—å `DATABASE_URL` –≤ Git** (–¥–æ–¥–∞–π –≤ `.gitignore`)

---

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
Development:
‚îú‚îÄ‚îÄ backend/.env
‚îÇ   ‚îî‚îÄ‚îÄ DATABASE_URL=postgresql://...dev-database... (–∞–±–æ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è SQLite)
‚îî‚îÄ‚îÄ .tmp/data.db (—è–∫—â–æ SQLite)

Production (Railway):
‚îî‚îÄ‚îÄ Environment Variables
    ‚îî‚îÄ‚îÄ DATABASE_URL=postgresql://...production-database...
```

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä —Ç–∏ –∑–Ω–∞—î—à, —è–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –¥–ª—è dev —ñ prod –±–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤. üéâ

